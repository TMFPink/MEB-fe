<div class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto ">
    <div class="bg-[var(--side-color)] rounded-[10px] shadow-lg w-[50vw] max-w-6xl mx-4 my-8 h-[90%] flex flex-col">
      <div class="flex justify-between items-center p-4  pr-7">
        <h1 class="text-5xl font-bold text-[var(--font-color)]">Create post</h1>
        <button class="text-gray-600 hover:text-gray-800 text-5xl" (click)="onClose()">Ã—</button>
      </div>
      <div class="overflow-y-auto flex-grow p-4">
        <form [formGroup]="form" > 
            <nz-form-item>
                <nz-form-control>
                    <nz-textarea-count [nzMaxCharacterCount]="100">
                        <textarea  
                            rows="1" 
                            formControlName="title" 
                            nz-input 
                            class="text-white text-2xl w-full h-40 p-2 border rounded-xl mb-1 focus:outline-none bg-[var(--font-color)] " 
                            placeholder="Title"
                            [ngClass]="{'invalid-background': form.get('title')?.invalid}"
                        ></textarea>
                    </nz-textarea-count>
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-control>
                    <input type="file" id="file-upload" name="uploadfile" class="hidden" (change)="onFileChange($event)" accept="image/*"  />
                        <label for="file-upload" class="custom-file-upload mb-4">
                            Upload blog thumbnail
                        </label>
                        <div *ngIf="imagePreview">
                            <img [src]="imagePreview" alt="Image Preview" class="w-full h-72 rounded-lg shadow-md" />
                          </div>
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-control>
                    <div class="flex gap-5">
                        <nz-select nzMode="multiple" nzPlaceHolder="Select Tags" [(ngModel)]="tags" [formControlName]="'tags'" [nzAllowClear]="true"> 
                            <nz-option *ngFor="let tag of (tags$ | async)" [nzLabel]="tag.name" [nzValue]="tag.name"></nz-option> 
                        </nz-select>
                        <button class="shine-button bg-[--main-theme] text-white w-40 flex items-center justify-center h-10 rounded-xl font-bold">
                            Create Tag
                        </button>
                    </div>
                    
                </nz-form-control>
            </nz-form-item>

            <div class="bg-[var(--font-color)]">
                
                <div class="text-white rounded-xl">
                    <ckeditor [editor]="editor" [config]="editorConfig" formControlName="content"></ckeditor>
                </div>
                <div class="flex justify-end p-4">
                    <button 
                        *ngIf="form.invalid"
                        [disabled]="form.invalid" 
                        class="bg-gray-500 cursor-not-allowed text-white w-32 flex items-center justify-center h-10 rounded-xl font-bold">
                        CREATE
                    </button>
                    <button 
                        (click)="onSubmit()"
                        *ngIf="!form.invalid"
                        [disabled]="form.invalid" 
                        class="shine-button bg-[--main-theme] text-white w-32 flex items-center justify-center h-10 rounded-xl font-bold">
                        CREATE
                    </button>
                </div>
            </div>
            
            
        </form>
      </div>
      
    </div>
</div>
